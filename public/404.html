<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>გვერდი ვერ მოიძებნა</title>
    <script>
      // ძალიან გამარტივებული 404 ლოგიკა GitHub Pages SPA-სთვის
      (function() {
        const path = window.location.pathname;
        const basePath = '/shop';
        const origin = window.location.origin;
        
        console.log('404 გვერდზე ვართ, გზა:', path);
        
        // შევამოწმოთ, თუ პირდაპირ პროდუქტის გვერდზე ვართ შესული
        // და მისამართი სწორია, მაშინ გადავამისამართოთ index.html-ზე
        // რათა Next.js-მა შეძლოს მარშრუტიზაცია
        const productPattern = /^\/shop\/product\/[^\/]+\/?$/;
        const alternateProductPattern = /^\/shop\/shop\/product\/[^\/]+\/?$/;
        
        if (productPattern.test(path) || alternateProductPattern.test(path)) {
          console.log('404: პროდუქტის გვერდის მისამართია:', path);
          
          // ამოვიღოთ პროდუქტის ID
          const match = path.match(/\/product\/([^\/]+)/);
          if (match && match[1]) {
             const productId = match[1];
             localStorage.setItem('currentProductId', productId);
             console.log('ID შენახულია:', productId);
             
             // გადავამისამართოთ index.html-ზე შენახული ID-ით
             window.location.href = origin + basePath + '/?product=' + productId;
             return;
          }
        }
        
        // თუ მისამართი სხვა არის, გადავამისამართოთ მთავარ გვერდზე
        console.log('404: არასწორი მისამართი, გადამისამართება /shop/-ზე:', path);
        window.location.href = origin + basePath + '/';
      })();
    </script>
    <!-- მეტა განახლება წავშალოთ ან დავაკომენტაროთ, რადგან სკრიპტი აკეთებს გადამისამართებას -->
    <!-- <meta http-equiv="refresh" content="0;url=/shop/" /> -->
    <style>
      body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
      a { color: #0066cc; }
    </style>
  </head>
  <body>
    <h1>გვერდი ვერ მოიძებნა</h1>
    <p>გადამისამართება მიმდინარეობს...</p>
    <p>თუ ავტომატურად არ გადამისამართდა, გთხოვთ, დააჭიროთ <a href="/shop/">აქ</a>.</p>
  </body>
</html> 