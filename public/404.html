<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>გვერდი ვერ მოიძებნა</title>
    <script>
      // GitHub Pages-ზე დაკარგული გვერდების მართვა
      (function() {
        const path = window.location.pathname;
        const basePath = '/shop';
        const origin = window.location.origin;
        
        console.log('404 გვერდზე ვართ, გზა:', path);
        
        // შევამოწმოთ, პროდუქტის გვერდზე ვცდილობთ გადასვლას თუ არა
        const productPattern = /\/shop\/product\/([^\/]+)\/?$/;
        const alternateProductPattern = /\/shop\/shop\/product\/([^\/]+)\/?$/;
        
        // პირველად ვცდილობთ პატერნიდან ID-ის ამოღებას
        let productMatch = path.match(productPattern) || path.match(alternateProductPattern);
        
        if (productMatch && productMatch[1]) {
          const productId = productMatch[1];
          console.log('პროდუქტის ID ამოღებულია:', productId);
          
          // შევინახოთ ID localStorage-ში
          localStorage.setItem('currentProductId', productId);
          
          // გადავამისამართოთ მთავარ გვერდზე hash პარამეტრით
          // ვიყენებთ hash ნავიგაციას, რომელიც უკეთ მუშაობს GitHub Pages-ზე
          window.location.href = origin + basePath + '/#product=' + productId;
          return;
        }
        
        // თუ ვერ ვიპოვეთ პროდუქტის ID, გადავამისამართოთ მთავარ გვერდზე
        console.log('გადამისამართება მთავარ გვერდზე');
        window.location.href = origin + basePath + '/';
      })();
    </script>
    <!-- მეტა განახლება წავშალოთ ან დავაკომენტაროთ, რადგან სკრიპტი აკეთებს გადამისამართებას -->
    <!-- <meta http-equiv="refresh" content="0;url=/shop/" /> -->
    <style>
      body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
      a { color: #0066cc; }
    </style>
  </head>
  <body>
    <h1>გვერდი ვერ მოიძებნა</h1>
    <p>გადამისამართება მიმდინარეობს...</p>
    <p>თუ ავტომატურად არ გადამისამართდა, გთხოვთ, დააჭიროთ <a href="/shop/">აქ</a>.</p>
  </body>
</html> 