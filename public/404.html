<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>გვერდი ვერ მოიძებნა</title>
    <script>
      // პროდუქტის გვერდების მართვა
      (function() {
        try {
          // მივიღოთ საბაზისო გზა GitHub Pages-დან
          const basePath = '/shop';
          const origin = window.location.origin;
          const path = window.location.pathname;
          console.log('მიმდინარე გზა:', path);
          
          // შევამოწმოთ არის თუ არა მარშრუტი პროდუქტის გვერდისთვის
          // გამოსწორებული რეგულარული გამოსახულება, რომ სწორად ამოიცნოს პროდუქტის ID
          const productPattern = /\/shop(?:\/shop)*\/product\/([^\/]+)\/?/;
          const match = path.match(productPattern);
          
          if (match && match[1]) {
            // პროდუქტის ID
            const productId = match[1];
            console.log('404 redirect: პროდუქტის ID:', productId);
            
            // შევინახოთ პროდუქტის ID localStorage-ში
            localStorage.setItem('currentProductId', productId);
            
            // სწორი URL - სრული მისამართით
            const redirectUrl = origin + basePath + '/product/' + productId + '/';
            
            // გავლოგოთ გადამისამართების URL
            console.log('გადამისამართდება:', redirectUrl);
            
            // გადავამოწმოთ, ხომ არ ვაგზავნით იმავე მისამართზე
            if (window.location.href === redirectUrl) {
              console.log('თავიდან ავიცილოთ ლუპი, გადავდივართ მთავარ გვერდზე');
              window.location.href = origin + basePath + '/';
              return;
            }
            
            // გადამისამართება
            window.location.href = redirectUrl;
            return;
          }
          
          // თუ არ არის პროდუქტის გვერდი, გადავამისამართოთ მთავარ გვერდზე
          window.location.href = origin + basePath + '/';
        } catch (error) {
          console.error('შეცდომა გადამისამართებისას:', error);
          // შეცდომის შემთხვევაშიც გადავამისამართოთ მთავარ გვერდზე
          window.location.href = window.location.origin + '/shop/';
        }
      })();
    </script>
    <meta http-equiv="refresh" content="2;url=/shop/" />
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 2rem;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
      }
      h1 {
        color: #333;
        margin: 1rem 0;
      }
      a {
        color: #0066cc;
        text-decoration: none;
        font-weight: bold;
      }
      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>გვერდი ვერ მოიძებნა</h1>
      <p>გადამისამართება მიმდინარეობს...</p>
      <p>თუ ავტომატურად არ გადამისამართდა, გთხოვთ, დააჭიროთ ქვემოთ მოცემულ ბმულს:</p>
      <p><a href="/shop/">მაღაზიაზე გადასვლა</a></p>
    </div>
  </body>
</html> 